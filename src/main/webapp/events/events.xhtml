<ui:composition template="/templates/pageTemplate.xhtml"
				xmlns="http://www.w3.org/1999/xhtml"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:p="http://primefaces.org/ui">

	<div id="contentFrame">
		<ui:define name="contentFrame">

			<h:form id="msgForm">

				<p:panelGrid columns="2">

					<p:outputLabel value="Host: " class="boldtext"/>
					<p:selectCheckboxMenu id="multipleHosts"
										  value="#{backendBean.selectedHosts}"
										  valueChangeListener="#{backendBean.selectedHostsChangeEvent}"
										  label="Hosts"
										  style="min-width: 15rem"
										  multiple="true"
										  filter="true"
										  filterMatchMode="contains"
										  panelStyle="width: 30rem"
										  scrollHeight="250">

						<p:ajax update="msgForm"/>
						<f:selectItems value="#{backendBean.availableHosts}"/>
					</p:selectCheckboxMenu>

					<p:outputLabel value="Ident: " class="boldtext"/>
					<p:selectCheckboxMenu id="multipleIdents"
										  value="#{backendBean.selectedIdents}"
										  valueChangeListener="#{backendBean.selectedIdentsChangeEvent}"
										  label="Idents"
										  style="min-width: 15rem"
										  multiple="true"
										  filter="true"
										  filterMatchMode="contains"
										  panelStyle="width: 30rem"
										  scrollHeight="250">

						<p:ajax update="msgForm"/>
						<f:param name="filter" value="asdf" />
						<f:selectItems value="#{backendBean.availableIdents}"/>
					</p:selectCheckboxMenu>

				</p:panelGrid>

				<p:commandLink onclick="PF('filterPanel').toggle();" value="Show more filter options" />
				<p:panel id="filterPanel" widgetVar="filterPanel" closable="true" toggleSpeed="500" toggleable="true" collapsed="true">
					<p:panelGrid columns="2">
						<p:selectOneMenu id="option" value="#{backendBean.selectedSearchOption}">
<!--							<f:selectItem itemLabel="Contains" itemValue="CONTAINS"/>-->
							<f:selectItem itemLabel="RegEx" itemValue="REGEX"/>
							<f:selectItem itemLabel="Grok" itemValue="GROK"/>
						</p:selectOneMenu>
						<p:inputText size="80" placeholder="^[pattern]$" value="#{backendBean.selectedSearchPattern}"/>
						<p:outputLabel value="Time range:"/>
						<p:panel>
							<h:panelGrid columns="1" style="margin-bottom: 10px">
								<h:outputText id="displayRange" value="Between #{sliderView.timeRange1} and #{sliderView.timeRange2}" />
								<p:slider for="txt6,txt7" display="displayRange" style="width: 400px" range="true" displayTemplate="Between {min} and {max}" />
							</h:panelGrid>
							<h:inputHidden id="txt6" value="#{backendBean.timeRange1}" />
							<h:inputHidden id="txt7" value="#{backendBean.timeRange2}" />
						</p:panel>
						<p:outputLabel value="Limit:"/>
						<p:inputText value="#{backendBean.limit}"/>
						<p:outputLabel value="Sort ascending:"/>
						<p:toggleSwitch value="#{backendBean.sortAscending}">
							<p:ajax listener="#{backendBean.applyFilterAction}" update="msgForm"/>
						</p:toggleSwitch>
						<p:commandButton type="submit" value="Reset"
										 styleClass="ui-button-outlined ui-button-secondary"
										 style="width: 6rem;"
										 action="#{backendBean.resetFilter}"
										 update="msgForm"/>
						<p:commandButton type="submit" value="Apply"
										 styleClass="ui-button-outlined"
										 style="width: 6rem;"
										 action="#{backendBean.applyFilterAction}"
										 update="msgForm" />
					</p:panelGrid>
				</p:panel>

				<p:outputPanel id="eventPanel">
					<div class="card">
						<p:outputPanel deferred="true" deferredMode="visible" class="p-mt-2">
							<pre style="font-size: 12px;">#{backendBean.concatenatedEvents}</pre>
						</p:outputPanel>
					</div>
				</p:outputPanel>

			</h:form>

			<!--			<p:poll interval="10" update="msgForm" />-->


		</ui:define>
	</div>

</ui:composition>

