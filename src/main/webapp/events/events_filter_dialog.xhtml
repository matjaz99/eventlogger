<ui:composition template="/templates/pageTemplate.xhtml"
				xmlns="http://www.w3.org/1999/xhtml"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:p="http://primefaces.org/ui">

	<div id="contentFrame">
		<ui:define name="contentFrame">

			<h:form id="msgForm">

				<p:panelGrid columns="2">

					<p:outputLabel value="Host: " class="boldtext"/>
					<p:selectCheckboxMenu id="multipleHosts"
										  value="#{backendBean.selectedHosts}"
										  valueChangeListener="#{backendBean.selectedHostsChangeEvent}"
										  label="Hosts"
										  style="min-width: 15rem"
										  multiple="true"
										  filter="true"
										  filterMatchMode="contains"
										  panelStyle="width: 30rem"
										  scrollHeight="250">

						<p:ajax update="msgForm"/>
						<f:selectItems value="#{backendBean.availableHosts}"/>
					</p:selectCheckboxMenu>

					<p:outputLabel value="Ident: " class="boldtext"/>
					<p:selectCheckboxMenu id="multipleIdents"
										  value="#{backendBean.selectedIdents}"
										  valueChangeListener="#{backendBean.selectedIdentsChangeEvent}"
										  label="Idents"
										  style="min-width: 15rem"
										  multiple="true"
										  filter="true"
										  filterMatchMode="contains"
										  panelStyle="width: 30rem"
										  scrollHeight="250">

						<p:ajax update="msgForm"/>
						<f:param name="filter" value="asdf" />
						<f:selectItems value="#{backendBean.availableIdents}"/>
					</p:selectCheckboxMenu>

					<p:commandButton value="Filter *" type="button" icon="pi pi-filter" styleClass="ui-button-outlined" onclick="PF('fltrdlg').show(200)"/>
					<p:outputLabel value="Option: #{backendBean.selectedSearchOption}, Pattern: #{backendBean.selectedSearchPattern}"/>

				</p:panelGrid>

				<p:outputPanel id="eventPanel">
					<div class="card">
						<p:outputPanel deferred="true" deferredMode="visible" class="p-mt-2">
							<pre style="font-size: 12px;">#{backendBean.concatenatedEvents}</pre>
						</p:outputPanel>
					</div>
				</p:outputPanel>

			</h:form>




			<h:form id="filterForm">
			<p:dialog id="fDialog" header="Filter" widgetVar="fltrdlg" showEffect="fade" modal="true">


				<p:panelGrid columns="2">
					<p:selectOneMenu id="option" value="#{backendBean.selectedSearchOption}">
						<f:selectItem itemLabel="Contains" itemValue="CONTAINS"/>
						<f:selectItem itemLabel="RegEx" itemValue="REGEX"/>
						<f:selectItem itemLabel="Grok" itemValue="GROK"/>
					</p:selectOneMenu>
					<p:inputText size="80" placeholder="pattern" value="#{backendBean.selectedSearchPattern}"/>
					<p:outputLabel value="Limit:"/>
					<p:inputText value="#{backendBean.limit}"/>
					<p:outputLabel value="Sort ascending:"/>
					<p:toggleSwitch value="#{backendBean.sortAscending}"/>
				</p:panelGrid>

				<f:facet name="footer">

					<p:commandButton id="resetButton" type="button" value="Reset"
									 styleClass="ui-button-flat ui-button-secondary"
									 style="width: 6rem;"
									 onclick="PF('fltrdlg').hide(500);"
									 actionListener="#{backendBean.doFinishCreateFilter}"
									 action="#{backendBean.createFilterAction()}" />
					<p:commandButton id="applyButton" type="button" value="Apply"
									 styleClass="ui-button-flat"
									 style="width: 6rem;"
									 onclick="PF('fltrdlg').hide(500);"
									 action="#{backendBean.createFilterAction}"
									 update="filterForm"/>


				</f:facet>
<!--					<p:ajax update="filterForm"/>-->


			</p:dialog>
		</h:form>


		</ui:define>
	</div>

</ui:composition>

